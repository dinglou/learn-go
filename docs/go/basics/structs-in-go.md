# ç»“æ„ä½“

åŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥è¡¨ç¤ºäº‹ç‰©çš„åŸºæœ¬å±æ€§ï¼Œä½†æ˜¯æƒ³è¡¨è¾¾ä¸€ä¸ªäº‹ç‰©çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å±æ€§æ—¶ï¼Œè¿™æ—¶å€™å†ç”¨å•ä¸€çš„åŸºæœ¬æ•°æ®ç±»å‹å°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†ã€‚è¿™æ—¶ï¼Œå°±éœ€è¦è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œæ¥å°è£…å¤šä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™ç§æ•°æ®ç±»å‹å«ç»“æ„ä½“ï¼ˆå€¼ç±»å‹ï¼‰ã€‚

## å£°æ˜

ç»“æ„ä½“é€šè¿‡ type å’Œ struct å…³é”®å­—æ¥å£°æ˜ï¼š

```go
type user struct {
	id         int    // å­—æ®µé¦–å­—æ¯å°å†™ï¼Œç±»ä¼¼privateï¼Œå…¶å®ƒåŒ…ä¸èƒ½ä½¿ç”¨
	name, addr string // å­—æ®µç±»å‹ç›¸åŒæ—¶å¯ä»¥ç®€å†™åˆ°ä¸€è¡Œ
}
```

### åŒ¿åå­—æ®µ

ç»“æ„ä½“å…è®¸å…¶æˆå‘˜å­—æ®µåœ¨å£°æ˜æ—¶æ²¡æœ‰å­—æ®µåè€Œåªæœ‰ç±»å‹ï¼Œè¿™ç§æ²¡æœ‰åå­—çš„å­—æ®µç§°ä¸ºåŒ¿åå­—æ®µã€‚

```go
type Person struct {
	string // å…¶å®æ˜¯string string
	int    // å…¶å®æ˜¯int int
}
```

åŒ¿åå­—æ®µé»˜è®¤é‡‡ç”¨ç±»å‹åä½œä¸ºå­—æ®µåï¼Œç»“æ„ä½“ä¸­å­—æ®µåç§°å¿…é¡»å”¯ä¸€ï¼Œå› æ­¤ä¸€ä¸ªç»“æ„ä½“ä¸­åŒç§ç±»å‹çš„åŒ¿åå­—æ®µåªèƒ½æœ‰ä¸€ä¸ªã€‚

### åŒ¿åç»“æ„ä½“

å¯ä»¥åœ¨å£°æ˜ç»“æ„ä½“ç±»å‹åç«‹å³åˆ›å»ºåŒ¿åç»“æ„ä½“å®ä¾‹ã€‚è¿™åœ¨åªéœ€è¦ä¸€ä¸ªç»“æ„ä½“å®ä¾‹ï¼Œè€Œä¸éœ€è¦ä¸ºå…¶å®šä¹‰ä¸€ä¸ªå…·ä½“çš„ç±»å‹æ—¶éå¸¸æœ‰ç”¨ã€‚

```go
func main() {
	p := struct {
		string
		int
	}{"å¼ ä¸‰", 18}
	fmt.Println(p) // {å¼ ä¸‰ 18}
}
```

## å®ä¾‹åŒ–

```go
type user struct {
	id         int
	name, addr string
}

func main() {
	var u user // åƒå£°æ˜å†…ç½®ç±»å‹ä¸€æ ·ä½¿ç”¨varå…³é”®å­—å£°æ˜ç»“æ„ä½“ç±»å‹
	// è®¿é—®ç»“æ„ä½“æˆå‘˜ä½¿ç”¨ç‚¹å· . æ“ä½œç¬¦
	u.id = 1000
	u.name = "Tom"
	fmt.Println(u) // {1000 Tom }
	// é”®å€¼å¯¹èµ‹å€¼
	u = user{id: 1000, addr: "åŒ—äº¬"}
	fmt.Println(u) // {1000 åŒ—äº¬}
	// å¤šå€¼èµ‹å€¼ï¼Œé¡ºåºå¿…é¡»ä¸å­—æ®µé¡ºåºä¸€è‡´
	u = user{1000, "Tom", "ä¸Šæµ·"}
	fmt.Println(u) // {1000 Tom ä¸Šæµ·}
}
```

å®ä¾‹åŒ–ä¹‹ new(ç»“æ„ä½“)ï¼š

```go
func main() {
	u2 := new(user) // è¿”å›æŒ‡é’ˆï¼Œç­‰åŒäº &user{}
	fmt.Println(u2) // &{0  }
}
```

å®ä¾‹åŒ–ä¹‹&ç»“æ„ä½“ï¼š

```go
func main() {
	u3 := &user{}
	fmt.Println(u3) // &{0  }
}
```

ğŸ¤” çœ‹ä¸‹é¢ä»£ç ï¼Œå¹¶åˆ†æåŸå› ï¼š

```go
func main() {
	u := struct {
		name string
	}{"Tom"}

	u2 := &u
	// ä¸èƒ½è¿™æ ·å†™ï¼Œä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯ . çš„ä¼˜å…ˆçº§æ¯” * é«˜
	// æ‰€ä»¥ *u2.name å®é™…ä¸Šæ˜¯ *(u2.name)ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯ (*u2).name
	fmt.Println(*u2.name)
}
```

ç»“æ„ä½“æŒ‡é’ˆè®¿é—®å­—æ®µçš„æ ‡å‡†æ–¹å¼åº”è¯¥æ˜¯`(*ç»“æ„ä½“æŒ‡é’ˆ).å­—æ®µå` ï¼Œä½† Go åšäº†ç®€åŒ–ï¼Œæ”¯æŒ`ç»“æ„ä½“æŒ‡é’ˆ.å­—æ®µå`ã€‚ç¼–è¯‘å™¨åº•å±‚å¯¹`ç»“æ„ä½“æŒ‡é’ˆ.å­—æ®µå`åšäº†è½¬åŒ–`(*ç»“æ„ä½“æŒ‡é’ˆ).å­—æ®µå`ï¼Œè¿™æ˜¯ Go çš„è¯­æ³•ç³–ï¼Œä¹Ÿæ›´åŠ ç¬¦åˆç¨‹åºå‘˜çš„ä½¿ç”¨ä¹ æƒ¯ã€‚

## ç»“æ„ä½“æ–¹æ³•

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç»“æ„ä½“é™¤äº†æœ‰ä¸€äº›å­—æ®µå¤–ï¼Œè¿˜æœ‰ä¸€äº›è¡Œä¸ºï¼Œè¿™æ—¶å°±è¦ç”¨æ–¹æ³•æ‰èƒ½å®Œæˆã€‚

Go è¯­è¨€æ”¯æŒåœ¨ç»“æ„ä½“ä¸Šå®šä¹‰æ–¹æ³•ã€‚ç»“æ„ä½“æ–¹æ³•æ˜¯ä¸€ç§ä½œç”¨äºç‰¹å®šç±»å‹å˜é‡çš„å‡½æ•°ï¼Œè¿™ç§ç‰¹å®šç±»å‹å˜é‡å«åšæ¥æ”¶è€…ï¼ˆReceiverï¼‰ã€‚

ç»“æ„ä½“æ–¹æ³•å…è®¸å¯¹ç»“æ„ä½“å®ä¾‹è¿›è¡Œæ“ä½œï¼Œç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„æ–¹æ³•ã€‚å…¶å®ï¼Œæ¥æ”¶è€…çš„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä¸ä»…ä»…æ˜¯ç»“æ„ä½“ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥æ‹¥æœ‰æ–¹æ³•ã€‚

```go
// å®šä¹‰çŸ©å½¢ç»“æ„ä½“
type Rectangle struct {
	width, height int
}

// ä¸ºç»“æ„ä½“å®šä¹‰è®¡ç®—çŸ©å½¢é¢ç§¯çš„æ–¹æ³•ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹ï¼Œæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå®ä¾‹æˆå‘˜ä¼šè¿›è¡Œå¤åˆ¶
func (r Rectangle) Area() int {
	return r.width * r.height
}

// ä¸ºç»“æ„ä½“å®šä¹‰è®¡ç®—çŸ©å½¢å‘¨é•¿çš„æ–¹æ³•ï¼Œæ¥æ”¶è€…ä¸ºæŒ‡é’ˆç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œé¿å…å†…å­˜æ‹·è´
func (r *Rectangle) Perimeter() int {
	return 2 * (r.width + r.height)
}

func (r *Rectangle) String() string {
	return fmt.Sprintf("çŸ©å½¢ï¼šå®½ = %d  é«˜ = %d", r.width, r.height)
}

func main() {
	// åˆ›å»ºä¸€ä¸ª Rectangle ç»“æ„ä½“å®ä¾‹
	rect := Rectangle{width: 10, height: 5}

	// è°ƒç”¨ç»“æ„ä½“æ–¹æ³•è®¡ç®—é¢ç§¯
	fmt.Println("çŸ©å½¢é¢ç§¯:", rect.Area())

	// è°ƒç”¨ç»“æ„ä½“æ–¹æ³•è®¡ç®—å‘¨é•¿
	fmt.Println("çŸ©å½¢å‘¨é•¿:", rect.Perimeter())

	// å¦‚æœç±»å‹å®ç°äº† String() æ–¹æ³•ï¼Œåˆ™ fmt.Println é»˜è®¤ä¼šè°ƒç”¨è¯¥æ–¹æ³•è¿›è¡Œè¾“å‡º
	fmt.Println(&rect)
}
```

### æ–¹æ³• VS å‡½æ•°

æ–¹æ³•ä¸å‡½æ•°çš„åŒºåˆ«ï¼š

- å‡½æ•°ä¸å±äºä»»ä½•ç±»å‹ï¼Œæ–¹æ³•å±äºç‰¹å®šç±»å‹ã€‚å‡½æ•°æ˜¯å…¨å±€å®šä¹‰ï¼Œè°ƒç”¨æ—¶ä¸ä¼šæœ‰ç‰¹åˆ«çš„é™åˆ¶ï¼›è€Œæ–¹æ³•é™„ç€åœ¨å¯¹è±¡ä¸Šï¼Œå¿…é¡»é€šè¿‡å¯¹è±¡æ‰èƒ½å®ç°æ–¹æ³•çš„è°ƒç”¨
- å¯¹äºå‡½æ•°ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹æ—¶ï¼Œä¸èƒ½å°†æŒ‡é’ˆç±»å‹çš„æ•°æ®ç›´æ¥ä¼ é€’ï¼Œåä¹‹äº¦ç„¶
- å¯¹äºæ–¹æ³•ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹æ—¶ï¼Œå¯ä»¥ç›´æ¥ç”¨æŒ‡é’ˆç±»å‹çš„å˜é‡è°ƒç”¨æ–¹æ³•ï¼Œåè¿‡æ¥ä¹Ÿå¯ä»¥

```go
type user struct {
	name string
}

func (u user) greet() {
	u.name = "Bob"
	fmt.Println("Hello", u.name)
}

func p(u user) {
	fmt.Println(u.name)
}

func main() {
	u := user{name: "Alice"}
	p(u) // Alice
	// p(&u) // ç¼–è¯‘å‡ºé”™ï¼Œä¸èƒ½å°†æŒ‡é’ˆä¼ é€’ç»™å€¼ç±»å‹

	u.greet()           // Hello Bob
	fmt.Println(u.name) // Alice
	(&u).greet()        // ä»å½¢å¼ä¸Šæ˜¯ä¼ å…¥åœ°å€ï¼Œä½†æœ¬è´¨ä¸Šè¿˜æ˜¯å€¼ä¼ é€’
	fmt.Println(u.name) // æ‰€ä»¥è¿˜æ˜¯ Alice
}
```

**æ–¹æ³•æ€»ç»“**ï¼š

- ä¸ç®¡è°ƒç”¨å½¢å¼å¦‚ä½•ï¼ŒçœŸæ­£å†³å®šæ˜¯å€¼æ‹·è´è¿˜æ˜¯åœ°å€æ‹·è´ï¼Œå…³é”®çœ‹è¿™ä¸ªæ–¹æ³•å’Œå“ªä¸ªç±»å‹ç»‘å®šã€‚å¦‚æœæ˜¯å’Œå€¼ç±»å‹ï¼Œæ¯”å¦‚`u user`åˆ™æ˜¯å€¼æ‹·è´ï¼›å¦‚æœå’ŒæŒ‡é’ˆç±»å‹ï¼Œæ¯”å¦‚`u *user`åˆ™æ˜¯åœ°å€æ‹·è´
- æ–¹æ³•è°ƒç”¨å’Œä¼ å‚æœºåˆ¶ä¸å‡½æ•°åŸºæœ¬ä¸€æ ·ï¼Œä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯æ–¹æ³•è°ƒç”¨æ—¶ä¼šå°†è°ƒç”¨æ–¹æ³•çš„å˜é‡ï¼Œå½“åšå®å‚ä¹Ÿä¼ é€’ç»™æ–¹æ³•

## é¢å‘å¯¹è±¡

Go ä¸æ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå’Œä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç¼–ç¨‹æœ‰æ‰€åŒºåˆ«ï¼Œæ‰€ä»¥è¯´ Go è¯­è¨€æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programmingï¼ŒOOPï¼‰ç‰¹æ€§æ˜¯æ¯”è¾ƒå‡†ç¡®çš„ã€‚

Go è¯­è¨€ä¸­æ²¡æœ‰â€œç±»â€çš„æ¦‚å¿µï¼Œå…¶ç»“æ„ä½“å’Œå…¶ä»–è¯­è¨€ä¸­çš„ç±»ç›¸ä¼¼ï¼ŒGo åŸºäºç»“æ„ä½“æ¥å®ç° OOP ç‰¹æ€§ã€‚å’Œå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ç±»ç›¸æ¯”ï¼ŒGo ä¸­çš„ç»“æ„ä½“å…·æœ‰æ›´é«˜çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚

### å°è£…

å°è£…å®ç°æ­¥éª¤ï¼š

- å°†ç»“æ„ä½“ã€å­—æ®µé¦–å­—æ¯å°å†™
- ç»™ç»“æ„ä½“æ‰€åœ¨åŒ…æä¾›ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œç±»ä¼¼æ„é€ å‡½æ•°
- æä¾›ä¸€ä¸ª Set æ–¹æ³•ï¼Œç”¨äºè®¾ç½®å±æ€§å€¼
- æä¾›ä¸€ä¸ª Get æ–¹æ³•ï¼Œç”¨äºè·å–å±æ€§å€¼

åœ¨ model åŒ…ï¼š

```go
type user struct {
	Name string
	age  int
}

// å·¥å‚å‡½æ•°ï¼Œç›¸å½“äºæ„é€ å‡½æ•°
func New(name string) *user {
	return &user{
		Name: name,
	}
}

func (u *user) SetAge(age int) {
	if age > 0 && age < 150 {
		u.age = age
	} else {
		fmt.Println("å¹´é¾„ä¸åˆæ³•")
	}
}

func (u *user) GetAge() int {
	return u.age
}
```

åœ¨ main åŒ…ï¼š

```go
func main() {
	u := model.New("Alice")
	u.SetAge(25)
	fmt.Println(u.Name, u.GetAge()) // Alice 25
}
```

### ç»§æ‰¿

å½“ä¸¤ä¸ªç»“æ„ä½“çš„å­—æ®µå’Œæ–¹æ³•å‡ ä¹ä¸€æ ·æ—¶ï¼Œä»£ç å°±å‡ºç°äº†å†—ä½™ï¼Œä¸ä»…ä¸åˆ©äºç»´æŠ¤ï¼Œä¹Ÿä¸åˆ©äºåŠŸèƒ½çš„æ‰©å±•ã€‚è¿™æ—¶ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹å¼æ¥è§£å†³ã€‚ç»§æ‰¿å¯ä»¥è§£å†³ä»£ç å¤ç”¨ï¼Œè®©ä»£ç æ›´åŠ ç®€æ´ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œä¸”è®©ç¼–ç¨‹æ›´åŠ é è¿‘äººç±»æ€ç»´ã€‚

å½“å¤šä¸ªç»“æ„ä½“å­˜åœ¨ç›¸åŒçš„å­—æ®µå’Œæ–¹æ³•æ—¶ï¼Œå¯ä»¥è€ƒè™‘å°†è¿™äº›ç›¸åŒçš„å­—æ®µå’Œæ–¹æ³•æå–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ç»“æ„ä½“ä¸­ï¼Œå…¶å®ƒçš„ç»“æ„ä½“ä¸éœ€è¦é‡æ–°å®šä¹‰è¿™äº›å­—æ®µå’Œæ–¹æ³•ï¼Œåªéœ€åµŒå¥—ä¸€ä¸ªåŒ¿åç»“æ„ä½“å³å¯ã€‚

åœ¨ Go ä¸­ï¼Œå¦‚æœä¸€ä¸ªç»“æ„ä½“åµŒå¥—äº†å¦ä¸€ä¸ªåŒ¿åç»“æ„ä½“ï¼Œé‚£ä¹ˆè¿™ä¸ªç»“æ„ä½“å¯ä»¥ç›´æ¥è®¿é—®åŒ¿åç»“æ„ä½“çš„å­—æ®µå’Œæ–¹æ³•ï¼Œä»è€Œå®ç°äº†ç»§æ‰¿ç‰¹æ€§ã€‚

```go
type People struct {
  name string
}

func (p *People) eat() {
  fmt.Printf("%s is eating...\n", p.name)
}

type Student struct {
  People // é€šè¿‡åµŒå¥—åŒ¿åç»“æ„ä½“å®ç°ç»§æ‰¿ï¼ŒåŒ¿åå­—æ®µ Peopleï¼Œå…¶å®æ˜¯People People
  sid    int
  course []string
}

func (s *Student) learn() {
  fmt.Printf("%s is learning...\n", s.name)
}

func main() {
  s := Student{
    People{name: "Alice"},
    1001,
    []string{"math", "english"},
  }
	fmt.Println(s.name) // Alice
  s.eat()
  s.learn()
}
```

åœ¨ä¸Šé¢ä»£ç ç‰‡æ®µä¸­ï¼ŒStudent ç»“æ„ä½“æœ‰ä¸€ä¸ªåŒ¿åå­—æ®µ People ç»“æ„ä½“ã€‚People ç»“æ„ä½“ä¸­çš„å­—æ®µ nameï¼Œè¢«ç§°ä¸ºæå‡å­—æ®µï¼Œå› ä¸ºå®ƒå¯ä»¥è¢«è®¿é—®ï¼Œå°±åƒç›´æ¥åœ¨ People ç»“æ„ä½“æœ¬èº«ä¸­å£°æ˜ä¸€æ ·ã€‚

**æ·±å…¥è®¨è®º**ï¼š

- ç»“æ„ä½“å¯ä»¥ä½¿ç”¨åµŒå¥—åŒ¿åç»“æ„ä½“æ‰€æœ‰çš„å­—æ®µå’Œæ–¹æ³•ï¼Œä¸è®ºé¦–å­—æ¯å¤§å°å†™éƒ½å¯ä»¥ä½¿ç”¨
- åŒ¿åç»“æ„ä½“å­—æ®µè®¿é—®å¯ä»¥ç®€åŒ–ï¼Œä¾‹å¦‚å¯ä»¥ç›´æ¥é€šè¿‡ `s.name` è®¿é—® People ç»“æ„ä½“çš„ name å­—æ®µï¼Œè€Œä¸éœ€è¦ `s.People.name`
- å½“è®¿é—®ç»“æ„ä½“æˆå‘˜æ—¶ä¼šé‡‡ç”¨**å°±è¿‘è®¿é—®åŸåˆ™**ï¼Œå³å…ˆåœ¨å½“å‰ç»“æ„ä½“ä¸­æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°å†å»å†…å±‚ç»“æ„ä½“ä¸­æŸ¥æ‰¾ã€‚å½“ç»“æ„ä½“å’ŒåŒ¿åç»“æ„ä½“æœ‰ç›¸åŒçš„å­—æ®µæˆ–è€…æ–¹æ³•æ—¶ï¼Œå¦‚å¸Œæœ›è®¿é—®åŒ¿åç»“æ„ä½“çš„å­—æ®µå’Œæ–¹æ³•ï¼Œå¯é€šè¿‡åŒ¿åç»“æ„ä½“åæ¥åŒºåˆ†
- å½“ç»“æ„ä½“åµŒå…¥å¤šä¸ªåŒ¿åç»“æ„ä½“æ—¶ï¼ˆå¤šé‡ç»§æ‰¿ï¼‰ï¼Œå¦‚åŒ¿åç»“æ„ä½“æœ‰ç›¸åŒçš„å­—æ®µå’Œæ–¹æ³•ï¼ˆåŒæ—¶ç»“æ„ä½“æœ¬èº«æ²¡æœ‰åŒåçš„å­—æ®µå’Œæ–¹æ³•ï¼‰ï¼Œåœ¨è®¿é—®æ—¶ï¼Œå°±å¿…é¡»æ˜ç¡®æŒ‡å®šååŒ¿åç»“æ„ä½“åå­—ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™
- å¦‚æœç»“æ„ä½“åµŒå¥—æœ‰åç»“æ„ä½“ï¼Œè¿™ç§æ¨¡å¼å°±æ˜¯**ç»„åˆ**ï¼Œé‚£ä¹ˆåœ¨è®¿é—®ç»„åˆç»“æ„ä½“çš„å­—æ®µæˆ–æ–¹æ³•æ—¶ï¼Œå°±å¿…é¡»å¸¦ä¸Šç»„åˆç»“æ„ä½“åå­—

### å¤šæ€

åœ¨ Go è¯­è¨€ä¸­ï¼Œå¤šæ€æ˜¯é€šè¿‡[æ¥å£](/go/basics/interfaces-in-go)æ¥å®ç°çš„ã€‚
